#include <QString>
#include <QtTest>
#include "chromaprint_wrapper.h"

class ChromaprintWrapperTests : public QObject
{
    Q_OBJECT

public:
    ChromaprintWrapperTests();

private Q_SLOTS:
    void testCase1_data();
    void testCase1();
};

ChromaprintWrapperTests::ChromaprintWrapperTests()
{
}

void ChromaprintWrapperTests::testCase1_data()
{
    QTest::addColumn<QString>("pathname");
    QTest::addColumn<QString>("ref_fp");
    QTest::addColumn<int>("ref_duration");
    QTest::newRow("MP3_OnOff") << QString("/Users/doudou/workspaceQT/DLNA_server/tests/AUDIO/07 On_Off.mp3") << QString("AQAAOaOyUAmn4Emiw6GOp0jOI62yMMKL06gc6UZJWdHwiVqEeIyyY-KC79B1NKdxB68kNEO7rvigUUqEMA6DiuYK60GPikf09FDNMPCDcHeJkdqLJxlymbh2aHGJatGRh9nxo6eBH712vPqQLzm0Kw_yMZh2HxyP_mi65Xg4CfuDGk2zH8nmIwwPYRVFQCEgDAPGAOQYoUg4AIgyxCAAmBQIACGEAgAYIgxQiDkhAHAA") << 19;
    QTest::newRow("MP3_FunkAdd") << QString("/Users/doudou/workspaceQT/DLNA_server/tests/AUDIO/16 Funk Ad.mp3") << QString("AQAAuVEUNZmk4M3RcOHgHz2DL2jqQ3uWER8a_fgO_-hzFYx8uEp2HM75wjFqRULlkvCRZ0hvvBGMGz5-6D1cHc2zIA_6pWjOHKeC5kcfGuEPXWHRE3mOG34WB0ejMscboeGW9HiOx8jy8DjM7PihPYeiuOi1o2OyHFssfEf64QyaI3aUg9lhLitxH36cQicojjke52iqE_-Ollzxol2G_tBSZ3iUo-vRPDtqHc0FPj-afNCzQ4z7wkd1XCGJJsejI_2F8ETXFY5x-OOg83DVwyd65JHRHBWV44cfoz_yELqYoj-CpmKMPsrR_fAJ_0W7DO8Qfjm4E4eZQXuGfjoUJS7WhkfjHg_cI3YyGOF1gdEFq3zx5XAs4xn8QPJy-Ki4S2if4TnOoF3Q1If2LEM_WCWuXPBf9Aej7zCjwMdPOB76nKgMc0f6I_RodIXDFg984tkH8YW7o2eQH32CpuJxB81z9DlC_9BD9EQe1D6aZzneo3mU4AUEABMGCEYEMgQJw5gBAhAlgHAGEQaUAAAgIRghQhEEGBCCKSkAQMAIJgRBRjBAQEAACWYIAIAJxIQCgAFigBBUCIKQYcIQJ5ARQimFmEKEKUKIEEQIJYQQgAxghGGMCEGMYAiQAZhiQAhkCCJGCA2AEEwohhgASjCBBEBAGECQUAAAoQAD") << 51;
    QTest::newRow("M4A_MondeVirtuel") << QString("/Users/doudou/workspaceQT/DLNA_server/tests/AUDIO/01 Monde virtuel.m4a") << QString("AQABz8oUKYmiJJEUhNYOMT9yccFNgqrc4BlyMRBvBK6YowqTGXmO6i_8KBn0N7jkoBGlHNeFLzQhyfnwI3eCSiQVNJoiBy_-HGGm5YfWB298fAo5MMl3aD_y7Kidiug__Lh85Pqh7ImJnGlwlFKGJlNWPDrif_CdQWcYH3tE4zt0ZYb4pQb7BHk-TI_Q5NKRVzp-RdCoiwjDBCeeZeiFyeaQ_ELsg86PM2dwPriYo49khKmSB0J0H_9hJUlCXDo-hMmfQSMpH4-yFPOO6_AP9gnye5gbwbmOvMzxW4Oux0gpXDyONgsmR-OQ9Mhz8P5wNSHOB79QSzvcJHmCZIgeHzccSUvwJEl23EGoP2hOUdCTLce8PLiO5gv6GWyeIG-OKbmCnjnyX1D5qQizXWiDj8EX9BoRiXqQnDm4D08c4nyC45yMpkmOZNeD6MfToJI0NJISHteRL3AuBzrD-HhEY1byoB-ap2D7IM-P6UITT8d14leEUFIOLQxikTiLzjvW_eh1XHIRpg-kVE9QmZSQhpISZviEykmC-wDP4v_xg5R0hLkCzX2QxztOfE_ROEfFzZjJEK85lH-QJwkmUTy0lUaaHx6PmkMdlkGYUYfqzMiWHI8Nb8WdI9-DZDe8aAkc6ejK4xR-zFIbhMmgLY0RUwp-7MPRXAlC69B3nEKsiPnQJKNCXIERvoa-4zfCkIlRSXgunCFylPogJcvx5IipJeg4wRGoHv_RM3guVA7sBuGeHDr1IH92HIerB3y0HJeOKXQL_0YlJRnizIHyOcjJFEedbWgm7UEsJsdz6HGMx9ByoyePR3mQa0c_OBkcPQVjH_lyHT80ZlLQvEQcThl-_DjC9OhpsCX0SEIcLqh0fAfvoz-exSh3NBwu8fgUJbg2lXjA5EFJGu-SHU-OZOkzRPrx0Dj848w2PIqLPEeyRHfQC48yPEd-QjyN6Dl-DUyi5OiJJqHPYE8r-EIpDa8Qkgy2QWv8ItYSRsJ3CQd540HDZCoqSVFy5CJ6o6mIu2Av_EXZHExSHt8yDjfxB_2DZsHJ48mOd4NT4s5RgckWhjuOr8auQ0sl9DJu7cajfMLXo6mCnkGy03CVHNvGoM2i4H_x7MNbBzfKI3VyIlkjHVcT3McPJhGvoGvm4TJHxPrRJ4borIdLBVVKnOwGbk8j6FquoQlD9MLTECf0PGjqJ-hbGTkzPKGOUzh5PLgu3MZJCmWQOhK0S7ilI89OfA9CH81xHbyCK4cmHp-yo6oL9sLJoqSE5gsJ9RnO8PiJ72h_NMdL6AlyLSUe9B6-hehDNTieSyjJHE2aRB--JcgtHNrRjJmYBNk74kfH4ceX5HiGgzmDO9ilvKgbotnxZUcOfZeQ9gmeGd-koFvxzgiNPYUuVgABKADKIECgAQAZQIAyBmkCEFACOKCEA8IoAohDxggBgILDCYEAAEQRwQQmAAEBnGMGKCKBAIAQJACBABBAFBgCGIWMQowwwAAAAjBkrFUEEAMUQUI4QIXQQgDgDDKCKEGBQAAIwwwCDBBsACKICOIcBYR4AYAxBBGhjCFQCMacMgAQgphQxgADgGGOEACoQMgAYhwwxkCDgEEGIKCQZdhEQwARCBBDBADMG8aQMgAIo4AgggADwAGMCWKQMMQAKBASwAFDgABCCCcMwAqJJAR1TgBhGAJGAEMJQYYYycAxwAAnmEFIIGEgEUAKQowQjBVhlFbMCGMEQAggIpigQgBnACJAAECAEIwIAgCgRBgChWLCCCQMAUAYwIgBQhCkgARIKEKAAAYwBQgQzCAhmAFAEOAIcoAyRIACgDAghBHKEgMAUIw5QYFgiElAGAPAEQ") << 188;
    QTest::newRow("M4A_Giorgio") << QString("/Users/doudou/workspaceQT/DLNA_server/tests/AUDIO/03 Giorgio By Moroder.m4a") << QString("AQABz8oUJXkyCWeOX4XLjQm-PHiiMKgkoWGiFeeEC_FffEGpdyj3QEsoE32KP3AWJfKhJ8mOP6CjfOh5eDo-6Fpw0TiJdzm2H2Gn41J0PMcVhEfzQw-R68VlHk2k4tfx64d_pJegPTxipR3OHbXCEKmPWrqh58g_vDsuJTleouETYdJz5L0g7sSX4wyekmiqBP0F3UTd44ngwyvRcsZ9Dc9FKcR2phK-HW6SHM_x49DCXuizDKeWCt2vQkuaY7IyoonbI3yORndwSzqYRyXS7Ghb6GB-NDz2E6rkB28mNKGSo8slTDp86DqaZnNCnB7yBY6e42l2RI-Kfhrh-fgPndlxXBeuI0xIFTd-ZfAlfEeehA_-oIqGUY0F_aAuhA_O40tOgp6HXIeGUJmq4r_wTzhTNM8ctBOuDumlYM9E7EPTo2-IUspyeNkj-AlqH89xKvfA7EeYEOV4NFV2fCl-XGjCCY94EemPZPdwoWkaDeWZBNWPJvlxKirCJw-SKKOIO8X_YybRXAl6HVeWSUFjHaESOYMmk2izIXuY449wUqispGgSY9eJ5w9eeYgUtFEH5iFERjmLL0b6oJZ0PNGO68jcV_B_6C-mHD1uSceboTq07BXy40moF7uPMBf65QaTSkMdKD9OEc9y6HmOknmCy4K_EH4GNyFqjA-eo_mhnWFw7bgWmJly_OACLTk-eGQiBpNTc3iUqXgyofkErbmFR8ebwxVT6Ity_EUfNmgeNGeDUMuGJwsThH7gH6Fv_D-6RMnQRGSO_SF6NJ0SFRcYJT4cP0EzBvlQNCcDnUe-SMeVtXh2XGSI3gaT58ezKdNwHTmzTNASU-iu4Rr-4VPQSEdvDXqCopmV44R1_LgYHVpOCmF_9B6Oh_h2WGB0dih_IR1DnIFRjR-6Hw4_6McfXAzag2uDex505uiJ5jlOoYkjQTs-XfCPO0Tzoz2a54J2rTjRcFFQO4ifg8svtEGY87iO5ofWOGhqD73wHbd0WC9-tMclHH2iBDo5HPnaDezRWDoqP8gffEuES9dw9BnRTGKM49vxjA2Yp2ji4Qy-pKiuo_kC7TnxafJwZrCG6teIP9ByFA93POiHNLng63hTCuUbgjmP5kWsl8d1WDpU_mhOhCIaHh3T49mRRg_OGpqqIQyz4V0svA9uKUc_w8-FH2GWtejzHFoeIscV9ajYBI1-ofaFMGkSpcKFHyKPqw_uFFcTtFfgh3iKcE2E7wF5tFEWWD3C82jJ4oKoZkSPlYqCZ7Hw22jGq5i64LrQQ8tYPEdoNPl2PDm-ZfjxlSQaLQ3aETl1gnlmoblARz_0JEuP60EY_ahV402OL87xo3kUhLtw6KmGPkrB3Hii5OjuBEGMQowxJ40wQAlBgEEMKSGAM4gRAJgkRBmkAEKCGCCEEAAAwKBARDCBkGFAECeABIIwZBQVBACEAAEAGEcMdoYZAYCAQDgDgABSAWaEUAohAxwhQgGABDICAMCIMEgAAhAhggJkDEaIAGEAMAQxQICxDgiClCIAAMGEQ0oBwABCAjBiEEDIAACEEUgIgBQUChHCgKAKKoIMAQAAggFQwhqDCUAKCwENAAQoYCBAEDDFEEEKECe-kQ4ACIwQjBEEAFKAAEEEQAJRQSgBhggCDFAAAYScYIQJBYQRTFIHABDCMAYQEIoRYgxCECAiDGDAAC4IUIAYAYxgQBAAjDIIAAQBEUA6wgAixAkiBCBCDEMEU4IYAIQBDBCGqBFMACCAEEIBoAwCAgDHACBEEEAIEMQJA6RRAAiAiFdAUMIsNYRQAYhQQCDiKCMCKYIoQEoIawQBEBABCGBMCugEMYoQ") << 544;
    QTest::newRow("WAV_Giorgio") << QString("/Users/doudou/workspaceQT/DLNA_server/tests/AUDIO/test.wav") << QString("AQABz8oUJXkyCWeOX4XLjQm-PHiiMKgkoWGiFeeEC_FffEGpdyj3QEsoE32KP3AWJfKhJ8mOP6CjfOh5eDo-6Fpw0TiJdzm2H2Gn41J0PMcVhEfzQw-R68VlHk2k4tfx64d_pJegPTxipR3OHbXCEKmPWrqh58g_vDsuJTleouETYdJz5L0g7sSX4wyekmiqBP0F3UTd44ngwyvRcsZ9Dc9FKcR2phK-HW6SHM_x49DCXuizDKeWCt2vQkuaY7IyoonbI3yORndwSzqYRyXS7Ghb6GB-NDz2E6rkB28mNKGSo8slTDp86DqaZnNCnB7yBY6e42l2RI-Kfhrh-fgPndlxXBeuI0xIFTd-ZfAlfEeehA_-oIqGUY0F_aAuhA_O40tOgp6HXIeGUJmq4r_wTzhTNM8ctBOuDumlYM9E7EPTo2-IUspyeNkj-AlqH89xKvfA7EeYEOV4NFV2fCl-XGjCCY94EemPZPdwoWkaDeWZBNWPJvlxKirCJw-SKKOIO8X_YybRXAl6HVeWSUFjHaESOYMmk2izIXuY449wUqispGgSY9eJ5w9eeYgUtFEH5iFERjmLL0b6oJZ0PNGO68jcV_B_6C-mHD1uSceboTq07BXy40moF7uPMBf65QaTSkMdKD9OEc9y6HmOknmCy4K_EH4GNyFqjA-eo_mhnWFw7bgWmJly_OACLTk-eGQiBpNTc3iUqXgyofkErbmFR8ebwxVT6Ity_EUfNmgeNGeDUMuGJwsThH7gH6Fv_D-6RMnQRGSO_SF6NJ0SFRcYJT4cP0EzBvlQNCcDnUe-SMeVtXh2XGSI3gaT58ezKdNwHTmzTNASU-iu4Rr-4VPQSEdvDXqCopmV44R1_LgYHVpOCmF_9B6Oh_h2WGB0dih_IR1DnIFRjR-6Hw4_6McfXAzag2uDex505uiJ5jlOoYkjQTs-XfCPO0Tzoz2a54J2rTjRcFFQO4ifg8svtEGY87iO5ofWOGhqD73wHbd0WC9-tMclHH2iBDo5HPnaDezRWDoqP8gffEuES9dw9BnRTGKM49vxjA2Yp2ji4Qy-pKiuo_kC7TnxafJwZrCG6teIP9ByFA93POiHNLng63hTCuUbgjmP5kWsl8d1WDpU_mhOhCIaHh3T49mRRg_OGpqqIQyz4V0svA9uKUc_w8-FH2GWtejzHFoeIscV9ajYBI1-ofaFMGkSpcKFHyKPqw_uFFcTtFfgh3iKcE2E7wF5tFEWWD3C82jJ4oKoZkSPlYqCZ7Hw22jGq5i64LrQQ8tYPEdoNPl2PDm-ZfjxlSQaLQ3aETl1gnlmoblARz_0JEuP60EY_ahV402OL87xo3kUhLtw6KmGPkrB3Hii5OjuBEGMQowxJ40wQAlBgEEMKSGAM4gRAJgkRBmkAEKCGCCEEAAAwKBARDCBkGFAECeABIIwZBQVBACEAAEAGEcMdoYZAYCAQDgDgABSAWaEUAohAxwhQgGABDICAMCIMEgAAhAhggJkDEaIAGEAMAQxQICxDgiClCIAAMGEQ0oBwABCAjBiEEDIAACEEUgIgBQUChHCgKAKKoIMAQAAggFQwhqDCUAKCwENAAQoYCBAEDDFEEEKECe-kQ4ACIwQjBEEAFKAAEEEQAJRQSgBhggCDFAAAYScYIQJBYQRTFIHABDCMAYQEIoRYgxCECAiDGDAAC4IUIAYAYxgQBAAjDIIAAQBEUA6wgAixAkiBCBCDEMEU4IYAIQBDBCGqBFMACCAEEIBoAwCAgDHACBEEEAIEMQJA6RRAAiAiFdAUMIsNYRQAYhQQCDiKCMCKYIoQEoIawQBEBABCGBMCugEMYoQ") << 544;
}

void ChromaprintWrapperTests::testCase1()
{
    QFETCH(QString, pathname);
    QFETCH(QString, ref_fp);
    QFETCH(int, ref_duration);

    ChromaprintWrapper m_chromaprint;

    int duration = -1;
    QString fp = m_chromaprint.fingerPrint(pathname, &duration);

    QCOMPARE(fp, ref_fp);
    QCOMPARE(duration, ref_duration);
}

QTEST_APPLESS_MAIN(ChromaprintWrapperTests)

#include "tst_chromaprintwrappertests.moc"
